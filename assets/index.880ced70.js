import{w as T,S as U,i as q,s as E,e as I,a as k,t as V,b as P,c as A,d as c,f as X,g as J,h as Y,n as F,j as K,k as Q,m as Z,l as tt,o as et,p as nt,q as st,r as ot,u as rt,v as at,x as lt,y as it,z as M,A as H,B as R,C as ct}from"./vendor.ab9f0e66.js";const ft=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(e){if(e.ep)return;e.ep=!0;const r=t(e);fetch(e.href,r)}};ft();function ut(n){n.slice(0,1)==="#"&&(n=n.slice(1));const s=parseInt(n.substr(0,2),16),t=parseInt(n.substr(2,2),16),o=parseInt(n.substr(4,2),16);return(s*299+t*587+o*114)/1e3>=128?"black":"white"}const z={red:"#ce0000",green:"#0f480c",yellow:"#dcd138",orange:"#ff7200",black:"#000000",pink:"#ff00ed",blue:"#0093ff",purple:"#822fe0",lime:"#05ff00",white:"#ffffff"};function dt(n,s){let t=s.filter((e,r)=>{for(const a of e.climb_groups)if(a.climb_id==n)return e});return t.length<1?t="aaa":t=t[0].name,t=t.toLowerCase(),t.split("/").length>1&&(t=t.split("/")[0]),z[t]?z[t]:"#0000ff"}function gt(n,s){let t=s.filter((e,r)=>{for(const a of e.climb_groups)if(a.climb_id==n)return e});if(t.length<1?t="aaa":t=t[0].name,t=t.toLowerCase(),t.split("/").length>1){const e=t.split("/");return`--dot-col: linear-gradient(315deg, ${z[e[0]]} 50%, ${z[e[1]]} 50%)`}return`--dot-col: ${z[t]?z[t]:"#0000ff"}`}const pt={uiaa:{2:"III",3:"IV-",3.44:"IV",3.89:"IV+",4.33:"V-",4.67:"V",4.92:"V+",5.5:"VI",5.21:"VI-",5.78:"VI+",6.06:"VII-",6.33:"VII",6.56:"VII+",6.78:"VIII-",7:"VIII",7.22:"VIII+",7.44:"IX-",7.67:"IX",7.89:"IX+",8.11:"X-",8.33:"X",8.56:"X+",8.78:"XI-",9:"XI",9.22:"XI+",9.44:"XII-"},yds:{2:"5.3",3:"5.4",4:"5.5",4.33:"5.6",4.67:"5.7",5:"5.8",5.33:"5.9",5.67:"5.10a",6:"5.10b",6.5:"5.11a",6.17:"5.10c",6.33:"5.10d",6.67:"5.11b",6.83:"5.11c",7:"5.11d",7.5:"5.12c",7.17:"5.12a",7.33:"5.12b",7.67:"5.12d",7.83:"5.13a",8:"5.13b",8.5:"5.14a",8.17:"5.13c",8.33:"5.13d",8.67:"5.14b",8.83:"5.14c",9:"5.14d",9.5:"5.15c",9.17:"5.15a",9.33:"5.15b"},french:{2:"2",2.5:"2",3:"3a",3.33:"3b",3.67:"3c",4:"4a",4.33:"4b",4.67:"4c",5:"5a",5.17:"5a+",5.33:"5b",5.5:"5b+",5.67:"5c",5.83:"5c+",6:"6a",6.17:"6a+",6.33:"6b",6.5:"6b+",6.67:"6c",6.83:"6c+",7:"7a",7.17:"7a+",7.33:"7b",7.5:"7b+",7.67:"7c",7.83:"7c+",8:"8a",8.17:"8a+",8.33:"8b",8.5:"8b+",8.67:"8c",8.83:"8c+",9:"9a",9.17:"9a+",9.33:"9b",9.5:"9b+"},french_boulder:{2:"2",2.5:"2",2.75:"2+",3:"3a",3.33:"3b",3.67:"3c",4:"4a",4.33:"4b",4.67:"4c",5:"5a",5.17:"5a+",5.33:"5b",5.5:"5b+",5.67:"5c",5.83:"5c+",6:"6a",6.17:"6a+",6.33:"6b",6.5:"6b+",6.67:"6c",6.83:"6c+",7:"7a",7.17:"7a+",7.33:"7b",7.5:"7b+",7.67:"7c",7.83:"7c+",8:"8a",8.17:"8a+",8.33:"8b",8.5:"8b+",8.67:"8c",8.83:"8c+",9:"9a",9.17:"9a+",9.33:"9b",9.5:"9b+"},french_rounded:{2:"2",2.5:"2",2.75:"2+",3:"3",3.33:"3+",3.67:"4-",4:"4",4.33:"4+",4.67:"5-",5:"5",5.5:"5+",6:"6a",6.5:"6b+",6.17:"6a+",6.33:"6b",6.67:"6c",6.83:"6c+",7:"7a",7.5:"7b+",7.17:"7a+",7.33:"7b",7.67:"7c",7.83:"7c+",8:"8a",8.5:"8b+",8.17:"8a+",8.33:"8b",8.67:"8c",8.83:"8c+",9:"9a",9.5:"9b+",9.17:"9a+",9.33:"9b"},ewbank:{2:"7",3:"8",3.33:"9",3.67:"10",4:"11",4.33:"12",4.66:"13",5:"14",5.33:"15",5.67:"16",6:"17",6.5:"20",6.17:"18",6.33:"19",6.67:"21",6.83:"22",7:"23",7.5:"26",7.17:"24",7.33:"25",7.67:"27",7.83:"28",8:"29",8.5:"32",8.17:"30",8.33:"31",8.67:"33",8.83:"34",9:"35",9.5:"38",9.17:"36",9.33:"37"},british:{2:"B0",3:"B1",3.83:"B2",5:"B3",6:"B4",6.28:"B5",6.56:"B6",6.83:"B7",7.11:"B8",7.39:"B9",7.67:"B10",7.87:"B11",8.08:"B12",8.29:"B13",8.5:"B14",8.67:"B15",8.83:"B16",9:"B17"},v_grade:{2:"VB",3:"VB",3.5:"V0-",4:"V0",4.5:"V0+",5:"V1",5.5:"V2",6:"V3",6.33:"V4",6.67:"V5",7:"V6",7.2:"V7",7.4:"V8",7.6:"V9",7.8:"V10",8:"V11",8.17:"V12",8.33:"V13",8.5:"V14",8.67:"V15",8.83:"V16",9:"V17"}};function mt(n,s){return pt[s][Number(n)]}const bt=JSON.parse(localStorage.getItem("gyms")),_t=T(bt);_t.subscribe(n=>{typeof n=="object"&&n!=null&&localStorage.setItem("gyms",JSON.stringify(n))});function D(n){const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=n?new Date(n):new Date,o=s[t.getMonth()],e=String(t.getDate()).padStart(2,"0"),r=t.getFullYear();return`${e} ${o} ${r}`}function W(n){let s,t,o,e,r,a,u=n[0].grade+"",v,d,m,_,h=n[0].nr_or_ascends+"",l,f,O,N,w=n[0].average_opinion+"",$,B,C,S,i,g=D(n[0].date_set)+"",p;return{c(){s=I("div"),t=I("h3"),t.textContent="Route data",o=k(),e=I("ul"),r=I("li"),a=V("grade: "),v=V(u),d=k(),m=I("li"),_=V("ascends: "),l=V(h),f=k(),O=I("li"),N=V("average opinion: "),$=V(w),B=V("/5.0"),C=k(),S=I("li"),i=V("date set: "),p=V(g),P(t,"class","svelte-2vyvgn"),P(s,"class","preview svelte-2vyvgn")},m(b,y){A(b,s,y),c(s,t),c(s,o),c(s,e),c(e,r),c(r,a),c(r,v),c(e,d),c(e,m),c(m,_),c(m,l),c(e,f),c(e,O),c(O,N),c(O,$),c(O,B),c(e,C),c(e,S),c(S,i),c(S,p)},p(b,y){y&1&&u!==(u=b[0].grade+"")&&X(v,u),y&1&&h!==(h=b[0].nr_or_ascends+"")&&X(l,h),y&1&&w!==(w=b[0].average_opinion+"")&&X($,w),y&1&&g!==(g=D(b[0].date_set)+"")&&X(p,g)},d(b){b&&J(s)}}}function ht(n){let s,t=n[0]&&W(n);return{c(){t&&t.c(),s=Y()},m(o,e){t&&t.m(o,e),A(o,s,e)},p(o,[e]){o[0]?t?t.p(o,e):(t=W(o),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},i:F,o:F,d(o){t&&t.d(o),o&&J(s)}}}function yt(n,s,t){let{data:o}=s;return n.$$set=e=>{"data"in e&&t(0,o=e.data)},[o]}class vt extends U{constructor(s){super();q(this,s,yt,ht,E,{data:0})}}const{window:x}=it;function wt(n){let s,t,o,e,r,a,u,v;return K(n[4]),r=new vt({props:{data:n[3]}}),{c(){s=I("main"),t=I("div"),e=k(),Q(r.$$.fragment),P(t,"class","svgContainer svelte-wdcirs")},m(d,m){A(d,s,m),c(s,t),t.innerHTML=n[2],c(s,e),Z(r,s,null),a=!0,u||(v=[tt(x,"resize",n[4]),et(o=It.call(null,t,n[2]))],u=!0)},p(d,[m]){(!a||m&4)&&(t.innerHTML=d[2]),o&&nt(o.update)&&m&4&&o.update.call(null,d[2]);const _={};m&8&&(_.data=d[3]),r.$set(_)},i(d){a||(st(r.$$.fragment,d),a=!0)},o(d){ot(r.$$.fragment,d),a=!1},d(d){d&&J(s),rt(r),u=!1,at(v)}}}const G="https://api.toplogger.nu/v1";function It(n,s){return{update(){},destroy(){}}}function Vt(n){return`https://cdn1.toplogger.nu/images/gyms/${n}/floorplan.svg`}function $t(n){const s={filters:{deleted:!1,live:!0}};return`${G}/gyms/${n}/climbs?json_params=${encodeURIComponent(JSON.stringify(s))}`}function Bt(n){const s={filters:{gym_id:n,deleted:!1,live:!0,score_system:"none"},includes:["climb_groups"]};return`${G}/groups?json_params=${encodeURIComponent(JSON.stringify(s))}`}function St(n,s,t){let o=[],e="",r,a=window.innerWidth,u=window.innerHeight;function v(){M("svg.flex").attr("width",a).attr("height",u)}function d(_,h){const l=M("svg.flex").attr("width",a).attr("height",u);H("g#zoom_layer").each(function(){let i=this;M(i.parentNode).insert("g").attr("class","zoom").append(()=>i)});const f=l.select("#zoom_layer").node().getBBox();o=l.select("#zoom_layer").attr("transform",`translate(${-f.x}, ${-f.y})`).append("g").attr("class","routes").selectAll("g").data(_).enter().append("g").attr("transform",i=>`translate(${f.width*i.position_x}, ${f.height*i.position_y})`).attr("class","route").on("click",(i,g)=>{i.stopPropagation(),t(3,r=g);const p=f.width/a*.75,b=f.width*g.position_x-f.x,y=f.height*g.position_y-f.y,j=a/2-2.5,L=u/2-2.5;l.transition().duration(500).call($.transform,R.translate(-b*p+j,-y*p+L).scale(p))}).append("foreignObject").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("class","scale"),o.append("xhtml:div").html(i=>mt(i.grade,"french_boulder")).attr("style",i=>`${gt(i.id,h)}`).style("color",i=>ut(dt(i.id,h)));const N=l.select(".zoom"),w=150,$=ct().translateExtent([[-w,-w],[f.width+w,f.height+w]]).scaleExtent([.1,2.5]).on("zoom",(i,g)=>{N.attr("transform",i.transform),o.attr("transform",`scale(${1/i.transform.k})`)}),B=u/f.height*.9,C=a/2-f.width/2*B,S=u/2-f.height/2*B;l.call($).call($.transform,R.translate(C,S).scale(B)),l.select(".zoom").attr("transform",`translate(${C}, ${S}) scale(${B})`),H("g.map-region").on("click",function(i){i.stopPropagation();const g=l.select(`#${this.id}`).node().getBBox(),p=u/g.height*.8,b=-(g.x-f.x)*p,y=-(g.y-f.y)*p,j=u/2-g.height/2*p,L=a/2-g.width/2*p;l.transition().duration(500).call($.transform,R.translate(b+L,y+j).scale(p))})}lt(async()=>{let _,h;t(2,[_,h,e]=await Promise.all([fetch($t(8)),fetch(Bt(8)),fetch(Vt("bruut_boulder_breda"))]).then(l=>Promise.all([l[0].json(),l[1].json(),l[2].text()])).then(l=>(t(2,e=l[2]),l)).catch(l=>{throw new Error(l)}),e),d(_,h)});function m(){t(1,u=x.innerHeight),t(0,a=x.innerWidth)}return n.$$.update=()=>{n.$$.dirty&1&&v(),n.$$.dirty&2&&v()},[a,u,e,r,m]}class Ot extends U{constructor(s){super();q(this,s,St,wt,E,{})}}new Ot({target:document.body,props:{}});
