import{w as t,S as e,i as a,s as r,e as n,t as s,a as o,b as c,c as i,d as l,f as d,g as u,n as f,h as p,j as b,m as g,l as m,k as h,o as V,p as y,q as $,r as w,u as _,v,x,y as B,z as N,A as S,B as k}from"./vendor.9cbdc49f.js";function z(t,e){let a=e.filter(((e,a)=>{for(const r of e.climb_groups)if(r.climb_id==t)return e}));a=a.length<1?"aaa":a[0].name;const r={red:"ce0000",green:"0f480c",yellow:"dcd138",orange:"ff7200",black:"000000",pink:"ff00ed",blue:"0093ff",purple:"822fe0",lime:"05ff00",white:"ffffff"};return r[a.toLowerCase()]?r[a.toLowerCase()]:"0000ff"}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const a of t)if("childList"===a.type)for(const t of a.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const I={UIAA:["1","2","3","4","4+","5-","5","5+","6-","6","6+","7-","7","7+","7+/8-","8-","8","8+","8+/9-","9-","9","9+","9+/10-","10-","10-","10","10+","10+/11-","11-","11","11","11/11+","11+","11+/12-","12-","12"],French:["1","2","3","4","4+","5a","5a/5b","5b","5b/5c","5c","6a","6a+","6b","6b+","6c","6c+","7a","7a+","7b","7b+","7c","7c+","8a","8a/8a+","8a+","8b","8b+","8c","8c+","9a","9a/9a+","9a+","9a+/9b","9b","9b+","9c"],"Sax Swiss":[],"British tech":[],"British ADJ":[],USA:["5.0","5.1","5.2","5.3","5.4","5.5","5.6","5.7","5.8","5.9","5.10a","5.10b","5.10c","5.10d","5.11a","5.11b","5.11c","5.11d","5.12a","5.12b","5.12c","5.12d","5.13a","5.13b","5.13c","5.13d","5.14a","5.14b","5.14c","5.14d","5.14d/5.15a","5.15a","5.15a/5.15b","5.15b","5.15c","5.15d"],"Nordic Fin":[],"Nordic Swe/Nor":[],"FB grade (boulder)":["1","1","1/2","2","2","2/3","3","4a","4a/4b","4b","4c","5a","5b","5c","6a","6a+","6b","6b+","6b+/6c","6c","6c+","7a","7a+","7a+/7b","7b","7b+","7c","7c+","7c+/8a","8a","8a+","8a+/8b","8b","8b+","8c","8c+"],"V grade":["VB-","VB-","VB-","VB-","VB-","VB-/VB","VB","VB/V0-","V0-","V0-/V0","V0","V0+","V1","V1/V2","V2","V2/V3","V3","V3/V4","V4","V4","V4/V5","V5","V6","V6/V7","V7","V8","V9","V10","V10/V11","V11","V12","V12/V13","V13","V14","V15","V16"],french_boulder:{2:"2",2.5:"2",2.75:"2+",3:"3a",3.33:"3b",3.67:"3c",4:"4a",4.33:"4b",4.67:"4c",5:"5a",5.17:"5a+",5.33:"5b",5.5:"5b+",5.67:"5c",5.83:"5c+",6:"6a",6.17:"6a+",6.33:"6b",6.5:"6b+",6.67:"6c",6.83:"6c+",7:"7a",7.17:"7a+",7.33:"7b",7.5:"7b+",7.67:"7c",7.83:"7c+",8:"8a",8.17:"8a+",8.33:"8b",8.5:"8b+",8.67:"8c",8.83:"8c+",9:"9a",9.17:"9a+",9.33:"9b",9.5:"9b+"}};t(JSON.parse(localStorage.getItem("gyms"))).subscribe((t=>{"object"==typeof t&&null!=t&&localStorage.setItem("gyms",JSON.stringify(t))}));function j(t){let e,a,r,u,f,p,b,g,m,h,V,y,$,w,_,v,x,B=t[0].grade+"",N=t[0].nr_or_ascends+"",S=t[0].average_opinion+"",k=Date.parse(t[0].date_set)+"";return{c(){e=n("ul"),a=n("li"),r=s("grade: "),u=s(B),f=o(),p=n("li"),b=s("ascends: "),g=s(N),m=o(),h=n("li"),V=s("average opinion: "),y=s(S),$=s("/5.0"),w=o(),_=n("li"),v=s("date set: "),x=s(k)},m(t,n){c(t,e,n),i(e,a),i(a,r),i(a,u),i(e,f),i(e,p),i(p,b),i(p,g),i(e,m),i(e,h),i(h,V),i(h,y),i(h,$),i(e,w),i(e,_),i(_,v),i(_,x)},p(t,e){1&e&&B!==(B=t[0].grade+"")&&l(u,B),1&e&&N!==(N=t[0].nr_or_ascends+"")&&l(g,N),1&e&&S!==(S=t[0].average_opinion+"")&&l(y,S),1&e&&k!==(k=Date.parse(t[0].date_set)+"")&&l(x,k)},d(t){t&&d(e)}}}function L(t){let e,a,r,s=t[0]&&j(t);return{c(){e=n("div"),a=n("h3"),a.textContent="Route data",r=o(),s&&s.c(),u(a,"class","svelte-1b75bwh"),u(e,"class","preview svelte-1b75bwh")},m(t,n){c(t,e,n),i(e,a),i(e,r),s&&s.m(e,null)},p(t,[a]){t[0]?s?s.p(t,a):(s=j(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:f,o:f,d(t){t&&d(e),s&&s.d()}}}function A(t,e,a){let{data:r}=e;return t.$$set=t=>{"data"in t&&a(0,r=t.data)},[r]}class C extends e{constructor(t){super(),a(this,t,A,L,r,{data:0})}}const{window:J}=x;function O(t){let e,a,r,s,l,f,v,x;return p(t[4]),l=new C({props:{data:t[3]}}),{c(){e=n("main"),a=n("div"),s=o(),b(l.$$.fragment),u(a,"class","svgContainer svelte-1qtevlj")},m(n,o){c(n,e,o),i(e,a),a.innerHTML=t[2],i(e,s),g(l,e,null),f=!0,v||(x=[m(J,"resize",t[4]),h(r=H.call(null,a,t[2]))],v=!0)},p(t,[e]){(!f||4&e)&&(a.innerHTML=t[2]),r&&V(r.update)&&4&e&&r.update.call(null,t[2]);const n={};8&e&&(n.data=t[3]),l.$set(n)},i(t){f||(y(l.$$.fragment,t),f=!0)},o(t){$(l.$$.fragment,t),f=!1},d(t){t&&d(e),w(l),v=!1,_(x)}}}const P="https://api.toplogger.nu/v1";function H(t,e){return{update(){},destroy(){}}}function U(t){const e={filters:{gym_id:t,deleted:!1,live:!0,score_system:"none"},includes:["climb_groups"]};return`${P}/groups?json_params=${encodeURIComponent(JSON.stringify(e))}`}function q(t,e,a){let r,n=[],s="",o=window.innerWidth,c=window.innerHeight;function i(t,e){const s=B("svg.flex").attr("width",o).attr("height",c);N("g#zoom_layer").each((function(){let t=this;B(t.parentNode).insert("g").attr("class","zoom").append((()=>t))}));const i=s.select("#zoom_layer").node().getBBox(),l=s.select("#zoom_layer").attr("transform",`translate(${-i.x}, ${-i.y})`).append("g").attr("class","routes");n=l.selectAll("g").data(t).enter().append("g").attr("transform",(t=>`translate(${i.width*t.position_x}, ${i.height*t.position_y})`)).attr("class","route").on("click",((t,e)=>{t.stopPropagation(),a(3,r=e);const n=i.width/o*.75,l=i.width*e.position_x-i.x,u=i.height*e.position_y-i.y,f=o/2-2.5,p=c/2-2.5;s.transition().duration(500).call(d.transform,S.translate(-l*n+f,-u*n+p).scale(n))})).append("g").attr("class","scale"),n.append("circle").attr("r",20).style("fill",(t=>`#${z(t.id,e)}`)),n.append("text").attr("dy",5).text((t=>{return e=t.grade,I["french_boulder"][Number(e)];var e})).attr("class",(t=>{return"#"===(a=z(t.id,e)).slice(0,1)&&(a=a.slice(1)),(299*parseInt(a.substr(0,2),16)+587*parseInt(a.substr(2,2),16)+114*parseInt(a.substr(4,2),16))/1e3>=128?"black":"white";var a})).attr("text-anchor","middle");const d=k().scaleExtent([.1,2.5]).on("zoom",((t,e)=>{s.select(".zoom").attr("transform",t.transform),n.attr("transform",`scale(${1/t.transform.k})`)})),u=c/i.height*.9,f=o/2-i.width/2*u,p=c/2-i.height/2*u;s.call(d).call(d.transform,S.translate(f,p).scale(u)),s.select(".zoom").attr("transform",`translate(${f}, ${p}) scale(${u})`),N("g.map-region").on("click",(function(t){t.stopPropagation();const e=s.select(`#${this.id}`).node().getBBox(),a=c/e.height*.8,r=-(e.x-i.x)*a,n=-(e.y-i.y)*a,l=c/2-e.height/2*a,u=o/2-e.width/2*a;s.transition().duration(500).call(d.transform,S.translate(r+u,n+l).scale(a))}))}return v((async()=>{let t,e;var r,n;a(2,[t,e,s]=await Promise.all([fetch((n=8,`${P}/gyms/${n}/climbs?json_params=${encodeURIComponent(JSON.stringify({filters:{deleted:!1,live:!0}}))}`)),fetch(U(8)),fetch((r="bruut_boulder_breda",`https://cdn1.toplogger.nu/images/gyms/${r}/floorplan.svg`))]).then((t=>Promise.all([t[0].json(),t[1].json(),t[2].text()]))).then((t=>(a(2,s=t[2]),t))).catch((t=>{throw new Error(t)})),s),i(t,e)})),t.$$.update=()=>{t.$$.dirty,t.$$.dirty},[o,c,s,r,function(){a(1,c=J.innerHeight),a(0,o=J.innerWidth)}]}new class extends e{constructor(t){super(),a(this,t,q,O,r,{})}}({target:document.body,props:{}});
